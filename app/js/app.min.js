document.addEventListener("DOMContentLoaded",(function(){let e=window.localStorage,t=document.getElementById("table"),n=e=>t.getElementsByTagName("tr")[parseInt(e)+1],r=(e,t)=>e.getElementsByTagName("td")[t],l=(t,n,l)=>{switch(n){case"company":{let n=(e=>r(e,2).innerText)(l);e.setItem(n,t);break}case"address":{let n=(e=>r(e,0).innerText)(l);e.setItem(n,t);break}case"phone":{let n=(e=>r(e,1).innerText)(l);e.setItem(n,t);break}}},a=e=>{let t=e.target,a=t.getAttribute("vertIndex"),d=t.getAttribute("horIndex"),o=document.createElement("input");o.value=t.innerText,o.onblur=e=>{((e,t,a)=>{let d=e.target,o=n(a),i=r(o,t),c=d.value,s=i.getAttribute("key");c.length>0&&(l(c,s,o),i.removeChild(d),i.innerText=c)})(e,d,a)},t.innerText="",t.appendChild(o),o.focus()},d=0,o=e=>{let n=document.createElement("tr");Object.keys(e).forEach((t,r)=>{let l=document.createElement("td");l.innerText=e[t],l.setAttribute("horIndex",r),l.setAttribute("vertIndex",d),l.setAttribute("key",t),l.ondblclick=a,n.appendChild(l)}),t.appendChild(n),d++};(()=>{let t=Object.keys(e).sort((e,t)=>t.length-e.length);for(let n=0;n<e.length/3;n++){let r=t[n],l=e[r],a=e[l];o({company:a,address:r,phone:l})}})()}));